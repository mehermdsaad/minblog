<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>minblog</title>
  <link rel="stylesheet" href="css/index.css">
</head>
<body>

<div class="book" id="book">
  <div class="page" id="pg-1">
    <div class="left">Page 1 Left</div>
    <div class="middle"></div>
    <div class="right">Page 1 Right</div>
  </div>
  <div class="page" id="pg-2">
    <div class="left">Page 2 Left</div>
    <div class="middle"></div>
    <div class="right">Page 2 Right</div>
  </div>
  <div class="page" id="pg-3">
    <div class="left">Page 3 Left</div>
    <div class="middle"></div>
    <div class="right">Page 3 Right</div>
  </div>
  <div class="page" id="pg-4">
    <div class="left">Page 4 Left</div>
    <div class="middle"></div>
    <div class="right">Page 4 Right</div>
  </div>
  <!-- 
  <div class="page" id="pg-3">
    <div class="left">Page 3 Left</div>
    <div class="right">Page 3 Right</div>
  </div>
  <div class="page" id="pg-4">
    <div class="left">Page 4 Left</div>
    <div class="right">Page 4 Right</div>
  </div> -->
</div>

<button style="z-index: 10; margin: 400px 0 10px 10px;" onclick="unflipPage()">Previous</button>
<button style="z-index: 10; margin: 400px 0 10px 10px;" onclick="flipPage()">Next</button>
  
<script>4
    let currentPage = 0;
    const pages = document.querySelectorAll('.page');

    // for(int i=0)
    function flipPage() {
    if (currentPage < pages.length) {
        const page = pages[pages.length - currentPage - 1];
        
        const left = page.querySelector('.left');
        const right = page.querySelector('.right');
        
        const index = currentPage;
        
        page.classList.add('flipped');

        // Delay z-index change until after flip animation
        setTimeout(() => {
        page.style.zIndex = -(pages.length - index); // progressively lower z-index
        left.style.zIndex = -1;
        right.style.zIndex = 1;
        }, 300);

        currentPage++;
    }
    }

    function unflipPage() {
    if (currentPage > 0) {
        currentPage--; // move pointer back

        const page = pages[pages.length - currentPage - 1];
        const left = page.querySelector('.left');
        const right = page.querySelector('.right');
        
        page.style.zIndex = 1;
        
        

        page.classList.remove('flipped');

        setTimeout(() => {
          left.style.zIndex = 1;
          right.style.zIndex = -1;
        }, 300);
        
    }
    }
</script>

</body>
</html>
